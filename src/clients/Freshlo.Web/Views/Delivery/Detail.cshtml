@using Freshlo.Web.Models.Sale;
@using System.Globalization;
@using Freshlo.Web.Helpers;
@model SalesDetailVM
@{
    ViewData["Title"] = "Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<form class="m-form m-form--fit m-form--label-align-right" enctype="multipart/form-data" action="/Sale/Detail/" id="SalesDetailformid" method="post">

    <!-- BEGIN: Subheader -->
    <div class="m-subheader">
        <div class="d-flex align-items-center">
            <div class="mr-auto">
                <h3 class="m-subheader__title m-subheader__title--separator">Order Detail</h3>
                <ul class="m-subheader__breadcrumbs m-nav m-nav--inline">
                    <li class="m-nav__item m-nav__item--home">
                        <a href="javascripts:;" class="m-nav__link m-nav__link--icon">
                            <i class="m-nav__link-icon la la-home"></i>
                        </a>
                    </li>
                    <li class="m-nav__separator">-</li>
                    <li class="m-nav__separator">-</li>
                    <li class="m-nav__item">
                        <a href="/Sale/Index/" class="m-nav__link">
                            <span class="m-nav__link-text">Home</span>
                        </a>
                    </li>
                    <li class="m-nav__separator">-</li>
                    <li class="m-nav__item">
                        <a href="/Sale/Manage/" class="m-nav__link">
                            <span class="m-nav__link-text">Sale Manage</span>
                        </a>
                    </li>
                    <li class="m-nav__separator">-</li>
                    <li class="m-nav__item">
                        <a href="javascripts:;" class="m-nav__link">
                            <span class="m-nav__link-text">Sale Detail</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div>
                @*<div class="" style="position: fixed;top: 95px;right: 20px;z-index:3;">
                        <button type="button" class="btn btn-primary"><i class="fa fa-save"></i> Update Order</button>
                    </div>*@
                <div class="display-inline-flex pr-2">
                    <div class="">
                        @*<label>Order Status</label>*@
                        <select class="form-control text-bold-600" id="OrderStatusId" name="OrderStatus" asp-for="SaleData.OrderdStatus" asp-items="@SalesHelpers.StatusList">
                            <option selected disabled>Select Order Status</option>
                        </select>
                        @*<select asp-items="@SalesHelpers.StatusList" class="form-control m-input m-input--solid" id="pending_Status">
                            <option value="">Select Order Status</option>
                        </select>*@
                    </div>
                </div>
                <button type="button" class="btn btn-primary" id="UpdateSalesOrder"><i class="fa fa-save"> </i> Update Order</button>
                <div class="m-dropdown m-dropdown--inline  m-dropdown--arrow m-dropdown--align-right" m-dropdown-toggle="click">
                    <a href="#" class="m-dropdown__toggle btn btn-dark dropdown-toggle">
                        More Action
                    </a>
                    <div class="m-dropdown__wrapper">
                        <span class="m-dropdown__arrow m-dropdown__arrow--right"></span>
                        <div class="m-dropdown__inner">
                            <div class="m-dropdown__body">
                                <div class="m-dropdown__content">
                                    <ul class="m-nav">
                                        <li class="m-nav__section m-nav__section--first">
                                            <span class="m-nav__section-text">Update Order</span>
                                        </li>
                                        @*  @if(Model.SaleData.OrderdStatus != "Ordered" ){*@
                                        <li class="m-nav__item">
                                            <a href="#" class="m-nav__link" id="ChangeDeliveryDate" data-toggle="modal" data-target="#changeDeliveryDate">
                                                <i class="m-nav__link-icon flaticon-file"></i>
                                                <span class="m-nav__link-text">Change Delivery Date</span>
                                            </a>
                                        </li>
                                        <li class="m-nav__item">
                                            <a href="#" class="m-nav__link" data-toggle="modal" data-target="#updateDeliveryCharges">
                                                <i class="m-nav__link-icon flaticon-file"></i>
                                                <span class="m-nav__link-text">Update Delivery Charges</span>
                                            </a>
                                        </li>
                                        <li class="m-nav__item">
                                            <a href="@Url.Action("Index","Print",new { id1 = @Model.SaleData.SalesOrderId })" class="m-nav__link" target="popup">
                                                <i class="m-nav__link-icon flaticon-technology"></i>
                                                <span class="m-nav__link-text">Print Bill</span>
                                            </a>
                                        </li>

                                        @*}*@
                                        <li class="m-nav__item">
                                            <a href="#" class="m-nav__link" data-toggle="modal" data-target="#refundInitiateds">
                                                <i class="m-nav__link-icon flaticon-file"></i>
                                                <span class="m-nav__link-text">Initiate Refund</span>
                                            </a>
                                        </li>
                                        <li class="m-nav__item">
                                            <a href="#" class="m-nav__link" data-toggle="modal" data-target="#applyCouponCode">
                                                <i class="m-nav__link-icon flaticon-file"></i>
                                                <span class="m-nav__link-text">Apply Coupon Code</span>
                                            </a>
                                        </li>
                                        @if (Model.SaleData.PaymentStatus != "Paid")
                                        {
                                            <li class="m-nav__item">
                                                <a href="#" class="m-nav__link" data-toggle="modal" data-target="#changepaymentStatus">
                                                    <i class="m-nav__link-icon flaticon-file"></i>
                                                    <span class="m-nav__link-text">Change Payment Status</span>
                                                </a>
                                            </li>
                                        }
                                        <li class="m-nav__item" id="DeliveryPerson_li" style="display:none">
                                            <a href="#" class="m-nav__link" data-toggle="modal" id="AssignDelivery-DrpDwn">
                                                <i class="m-nav__link-icon flaticon-file"></i>
                                                <span class="m-nav__link-text">Assign Delivery Person</span>
                                            </a>
                                        </li>
                                        @if (Model.SaleData.TransactionId != "NA")
                                        {
                                            <li class="m-nav__item" id="Refresh_li">
                                                <a href="#" class="m-nav__link" id="Refresh">
                                                    <i class="m-nav__link-icon flaticon-file"></i>
                                                    <span class="m-nav__link-text">Refresh</span>
                                                </a>
                                            </li>

                                        }

                                        @*<li class="m-nav__item">
            <a href="#" class="m-nav__link">
                <i class="m-nav__link-icon flaticon-file-2"></i>
                <span class="m-nav__link-text">Print Bill</span>
            </a>
        </li>*@

                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END: Subheader -->

    <div class="m-content">
        @* <form class="m-form m-form--fit m-form--label-align-right" enctype="multipart/form-data" action="/Sale/Detail/" id="SalesDetailformid" method="post">*@
        <div class="row">
            <div class="col-md-3">
                <div class="m-portlet" style="position: sticky !important;top: 80px;z-index: 3;">
                    <div class="m-portlet__body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="mb-1 font-small-2">Sales Order ID</label>
                                    <h6 class="font-medium-1 text-bold-600">@Model.SaleData.SalesOrderId <small>(@Model.SaleData.Source)</small></h6>
                                    <input type="hidden" name="SalesId" id="SalesOrderId" asp-for="SaleData.SalesOrderId" />
                                    <input type="hidden" name="CreatedBy" asp-for="SaleData.CreatedBy" />
                                    <input hidden id="sales-Id" name="Id" asp-for="SaleData.Id" />

                                    @*<span id="SalesId">@Model.SaleData.SalesOrderId</span>*@
                                    <span hidden id="CreatedBy">@Model.SaleData.CreatedBy</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="mb-1 font-small-2">Ordered Date</label>
                                    <h6 class="font-medium-1 text-bold-600">@(Model.SaleData.OrderedOn.ToString("dd-MMM-yyyy  hh:mm", CultureInfo.InvariantCulture))</h6>
                                </div>
                            </div>

                            @*<div class="col-md-6">
                                    <div class="form-group">
                                        <label class="mb-1 font-small-2">Source</label>
                                        <h6 class="font-medium-1 text-bold-600">Web</h6>
                                    </div>
                                </div>*@
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="mb-1 font-small-2">Sales Order Status</label>
                                    <h6 class="font-medium-1 text-bold-600">
                                        <span class="m-badge m-badge--@(SalesHelpers.OrderStatusTag.ContainsKey(Model.SaleData.OrderdStatus) ? SalesHelpers.OrderStatusTag[Model.SaleData.OrderdStatus]:"info") m-badge--wide">@Model.SaleData.OrderdStatus</span>
                                    </h6>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="mb-1 font-small-2">Payment Status</label>
                                    <h6 class="font-medium-1 text-bold-600">
                                        <span class="m-badge m-badge--@(SalesHelpers.PaymentStatusTag.ContainsKey(Model.SaleData.PaymentStatus) ? SalesHelpers.PaymentStatusTag[Model.SaleData.PaymentStatus]:"warning") m-badge--wide" id="PaymentStatus">@Model.SaleData.PaymentStatus</span>

                                    </h6>
                                </div>
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="mb-1 font-small-2">Payment Mode</label>
                                    <h6 class="font-medium-1 text-bold-600" id="PaymentMode">@Model.SaleData.PaymentMode</h6>
                                    <h6 class="font-medium-1 text-bold-600" id="TransactionIdS" style="display:none">@Model.SaleData.TransactionId</h6>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="mb-1 font-small-2">Coupon Applied</label>
                                    <h6 class="font-medium-1 text-bold-600" name="CoupenCode" id="CoupenCode">@Model.SaleData.Coupencode</h6>
                                    <input hidden id="CoupenId" name="CoupenId" asp-for="@Model.SaleData.CoupenId" />
                                    <input hidden id="Coupendisc" name="Coupen_Disc" asp-for="@Model.SaleData.DiscountPer" />
                                    <input hidden id="DiscountValue" name="Discount" asp-for="@Model.SaleData.Discount" />

                                </div>
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="mb-1 font-small-2">Delivery Date</label>
                                    <h6 class="font-medium-1 text-bold-600">@(Model.SaleData.DeliveryDate.ToString("dd-MMM-yyyy", CultureInfo.InvariantCulture))</h6>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="mb-1 font-small-2">Slot</label>
                                    <h6 class="font-medium-1 text-bold-600">@Model.SaleData.SlotId</h6>
                                    <span hidden id="MaxDiscount">@Model.SaleData.MaxDiscount</span>
                                </div>
                            </div>
                        </div>
                        <hr class="mt-0" />
                        <div class="row">
                            <div class="col-md-12">
                                <div class="table-responsive">
                                    <table class="table table-striped table-borderless">
                                        <thead>
                                            <tr>
                                                <th colspan="2">Bill Summary</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Order Value<span id="currency" hidden>@(SalesHelpers.Data)</span> </td>
                                                <td class="text-right text-bold-600">@(SalesHelpers.Data)<span class="text-bold-600" id="billSubAmount">@(Model.SaleData.TotalPrice + Convert.ToDouble(Model.SaleData.Discount))</span><span hidden id="TotalCartDiscValue">@Model.SaleData.TotalPrice</span></td>
                                              
                                            </tr>
                                            <tr>
                                                <td>Delivery Charge</td>
                                                <td class="text-right text-bold-600">+ @(SalesHelpers.Data)<span class="text-bold-600" id="billDeliveryCharge"> @Model.SaleData.DeliveryCharges</span></td>
                                            </tr>
                                            <tr>
                                                <td>Discount Applied</td>
                                                <td class="text-right text-bold-600">- @(SalesHelpers.Data)<span class="text-bold-600"  id="billDiscountAmt">@(Model.SaleData.Discount)</span></td>
                                            </tr>
                                            <tr>
                                                <td>Total Amount</td>
                                                <td class="text-right text-bold-600"> @(SalesHelpers.Data)<span class="text-bold-600" id="billCalculationtAmt">@(Model.SaleData.TotalPrice + Convert.ToDouble(Model.SaleData.DeliveryCharges))</span></td>
                                            </tr>

                                            <tr>
                                                <td>Wallet Cash Applied</td>
                                                <td class="text-right text-bold-600">- @(SalesHelpers.Data)<span class="text-bold-600" id="WallentAmount">@(Model.SaleData.WalletAmount)</span></td>
                                            </tr>

                                            <tr>
                                                <td>GST (CGST + SGST)</td>
                                                <td class="text-right">
                                                    <span class="text-bold-600">+  @(SalesHelpers.Data) <span class="text-bold-600" id="GSTValueId">@Model.GSTDetail.GST_Sum</span></span><br />
                                                    @*<span class="text-bold-600">SGST 5% - Rs. 15.00</span><br />
                <span class="text-bold-600">CGST 5% - Rs. 15.00</span>*@
                                                </td>
                                            </tr>
                                            <tr style="background-color: #ffdd78;color: #3e3e3e;font-weight: bold;font-size: 15px;">
                                                <td>Payable Amount</td>
                                                <td class="text-right text-bold-600">
                                                    @(SalesHelpers.Data)<span class="text-bold-600" id="billFinalAmount">@(Model.SaleData.TotalPrice + Convert.ToDouble(Model.SaleData.DeliveryCharges) - (Model.SaleData.WalletAmount)) </span>
                                                    <span hidden id="TotalsalesListCount">@Model.salesListcount</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div class="row">
                    <div class="col-md-12">
                        <div class="m-portlet">
                            <div class="m-portlet__body">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="mb-1 font-small-2">Customer Name / ID</label>
                                            <a href="/Customer/Detail/@Model.SaleData.CustomerId">
                                                <h6 class="font-medium-1 text-bold-500 mb-0" id="CustomerName">@Model.SaleData.CustomerName</h6>
                                                <span class="font-small-3" id="CustId">@Model.SaleData.CustomerId</span>
                                            </a>
                                                <input type="hidden" id="CustomerIds" name="CustomerId" asp-for="SaleData.CustomerId" />
                                            <input type="hidden" id="HubId" asp-for="SaleData.Hub" />
                                            <input type="hidden" id="CustomerNo" asp-for="SaleData.CustomerNo" />
                                            <input type="hidden" id="TransactionId" asp-for="SaleData.TransactionId" />
                                            <input type="hidden" id="PaymentStatus" asp-for="SaleData.PaymentStatus" />


                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="mb-1 font-small-2">Customer Number</label>
                                            <h6 class="font-medium-1 text-bold-500">@Model.SaleData.CustomerNo</h6>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="mb-1 font-small-2">Total Ordered</label>
                                            <h6 class="font-medium-1 text-bold-500">
                                                @Model.SaleData.TotalQuantity
                                            </h6>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="mb-1 font-small-2">Total Weight</label>
                                            <h6 class="font-medium-1 text-bold-500">
                                                @(Model.SaleData.TotalWeight) kg
                                            </h6>
                                        </div>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="mb-1 font-small-2">Address</label>
                                            <h6 class="font-medium-1 text-bold-500">@(Model.SaleData.BuildingName + ',' + Model.SaleData.RoomNo + ',' + Model.SaleData.Locality + ',' + Model.SaleData.Landmark + ',' + Model.SaleData.City + ',' + Model.SaleData.state)</h6>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="mb-1 font-small-2">Delivery Note's</label>
                                            <h6 class="font-medium-1 text-bold-500">
                                                @(Model.SaleData.DeliveryNotes)
                                            </h6>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 p-2">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="mb-1 font-small-2">Confirmed By</label>
                                                    <h6 class="font-medium-1 text-bold-600">@(Model.SaleProductStatus.ConfirmedStatusPersonName == null ? "NA" : Model.SaleProductStatus.ConfirmedStatusPersonName)</h6>
                                                    <span>@(Model.SaleProductStatus.ConfirmedStatusDate.ToString("dd-MMM-yyyy hh:mm:ss", CultureInfo.InvariantCulture))</span>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="mb-1 font-small-2">Packed By</label>
                                                    <h6 class="font-medium-1 text-bold-600">@(Model.SaleProductStatus.PackedStatusPersonName == null ? "NA" : Model.SaleProductStatus.PackedStatusPersonName)</h6>
                                                    <span>@(Model.SaleProductStatus.PackedStatusDate.ToString("dd-MMM-yyyy hh:mm:ss", CultureInfo.InvariantCulture))</span>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="mb-1 font-small-2">Delivery Person</label>
                                                    <h6 class="font-medium-1 text-bold-600">@Model.SaleData.DeliveryPerson</h6>
                                                    <span id="spnDeliveryDate">@(Model.SaleData.DeliveryDate.ToString("dd-MMM-yyyy hh:mm:ss", CultureInfo.InvariantCulture))</span>
                                                    <input type="hidden" name="ProductDeliveryDates" asp-for="@Model.SaleData.DeliveryDate" />
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="mb-1 font-small-2">Settelment Status</label>
                                                    <h6 class="font-medium-1 text-bold-600">Unknown</h6>
                                                    <span></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="m-portlet m-portlet--tabs">
                            <div class="m-portlet__body">
                                <div class="">
                                    <div class="" id="" role="">
                                        <div class="row animated fadeIn mb-2">
                                            <div class="col-md-4">
                                                <div class="form-group mb-0">
                                                    <select id="temp55" class="form-control m-input m-input--solid m-select2  temp55 clearitem"></select>
                                                </div>
                                                <span id="spnProductMsg"></span>
                                                <span hidden id="ItemWithCoupen"></span>
                                                <span hidden id="ItemWitoutCoupen"></span>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="form-group mb-0">
                                                    <input type="text" id="SearchQuantity" class="form-control m-input m-input--solid clearitem" placeholder="Qty" title="Quantity" />
                                                    <span id="SpnSearchquantity_Err" class="clearitem" style="color:red;display:none"></span>
                                                    <span hidden id="itemstock" class="clearitem"></span>
                                                    <span hidden id="SPurchaseprice" class="clearitem"></span>
                                                    <span hidden id="SstockId" class="clearitem"></span>
                                                    <span hidden id="SItemId" class="clearitem"></span>
                                                    <span hidden id="SCategoryName" class="clearitem"></span>
                                                    <span hidden id="SCategoryId" class="clearitem"></span>
                                                    <span hidden id="SItemName" class="clearitem"></span>
                                                    <span hidden id="SMarketPrice" class="clearitem"></span>
                                                    <span hidden id="SItemtype" class="clearitem"></span>
                                                    <span hidden id="SItem_Id" class="clearitem"></span>
                                                    <span hidden id="STaxValue" class="clearitem"></span>


                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="form-group mb-0">
                                                    <input type="text" id="NetWeightId" class="form-control m-input m-input--solid clearitem" placeholder="Net Weight" title="Net Weight" />
                                                    <span hidden id="Smeaure" class="clearitem"></span>
                                                    <input type="hidden" id="ShiddenWeight" class="clearitem" />
                                                    <span hidden id="Sprice" class="clearitem"></span>
                                                    <span hidden id="SCoupenDisc" class="clearitem"></span>
                                                </div>
                                            </div>
                                            <div class="col-md-1">
                                                <div class="form-group mb-0">
                                                    <input type="text" id="SearchDiscount" class="form-control  m-input m-input--solid clearitem" placeholder="00" title="Discount" />
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="form-group mb-0">
                                                    <input type="text" id="SearchAmount" class="form-control m-input m-input--solid clearitem" placeholder="@(SalesHelpers.Data) 00.00" readonly />
                                                    <span id="ShdMarket" style="visibility:hidden;" class="clearitem"></span>
                                                    <span hidden id="tempSearchAmount" class="clearitem"></span>
                                                    <span hidden id="totalGst"></span>
                                                    <input type="hidden" id="TotalsalesOrderCost" class="form-control TotalsalesOrderCost" name="TotalsalesOrderCost" style="width:100px;" />
                                                </div>
                                            </div>
                                            <div class="col-md-1">
                                                <div class="form-group mb-0">
                                                    <button type="button" id="AddSearchId" class="btn btn-secondary btn-block"><i class="la la-plus"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr />
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="table-responsive">
                                                    <table class="table ab-table-head-bg-warning-light table-borderless table-middle table-white-space-th">
                                                        <thead>
                                                            <tr>
                                                                <th></th>
                                                                @*<th></th>*@
                                                                <th>Product Name</th>
                                                                <th>Measurement</th>
                                                                <th>Weight</th>
                                                                <th>Qty</th>
                                                                <th>Discount</th>
                                                                <th>Total Price</th>
                                                                <th>Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="tblsaleslist">
                                                            @foreach (var itemlist in Model.productSalesList)
                                                            {
                                                                <tr id="@itemlist.ItemId">
                                                                    <td>
                                                                        <div class="m-widget4__img m-widget4__img--logo">
                                                                            <img src="https://freshlo.oss-ap-south-1.aliyuncs.com/HurTex/icon/@(itemlist.ItemId).png" alt="" style="width:60px;">
                                                                        </div>
                                                                    </td>
                                                                    @*<td><span hidden="" id="Totalitemstock_@itemlist.ItemId">-12</span></td>*@
                                                                    <td>
                                                                        <span hidden="" id="Totalitemstock_@itemlist.ItemId">-12</span>
                                                                        <a href="/ItemMaster/Detail/@itemlist.Item_Id" class="text-link">
                                                                            @itemlist.PluName
                                                                        </a>
                                                                        <span class="display-block font-small-3 text-bold-500 text-muted">@itemlist.CName</span>
                                                                    </td>
                                                                    <td>
                                                                        <span>@itemlist.ItemWeight @itemlist.Measurement X Rs. @itemlist.PricePerMeas</span>
                                                                        @* <span hidden id="TotalsalesListCount">@Model.salesListcount</span>*@
                                                                        <input type="hidden" id="TotalsalesListCount" class="form-control" name="TotalsalesListCount" asp-for="@Model.salesListcount" style="width:100px;" />
                                                                                                                          <input type="hidden" id="editsalesListCount" class="form-control weight" name="editsalesListCount" style="width:100px;" />
                                                                        <span hidden id="coupenDisc_@itemlist.ItemId">@itemlist.Coupen_Disc</span>
                                                                        <span hidden id="taxValue_@itemlist.ItemId">@itemlist.Item_Cost</span>
                                                                    </td>
                                                                    <td>
                                                                        @if (itemlist.ItemType == "Packed")
                                                                        {
                                                                            <input type="text" id="Netweight_@itemlist.ItemId" class="form-control weight" name="weightList" asp-for="@itemlist.weight" style="width:100px;" readonly />

                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control weight" id="Netweight_@itemlist.SalesListId" name="weightList" asp-for="@itemlist.weight" style="width:100px;" />

                                                                        }

                                                                        <span class="text-bold-400" id="spnNetweight_@itemlist.ItemId" hidden>@itemlist.weight</span>
                                                                    </td>
                                                                    <td>
                                                                        @if (itemlist.ItemType == "Loose")
                                                                        {
                                                                            <input type="text" class="form-control Quantity" name="QuantityValues" asp-for="@itemlist.QuantityValue" style="width:100px;" readonly />
                                                                        }
                                                                        else
                                                                        {
                                                                            <input type="text" class="form-control Quantity" id="quantity_@itemlist.ItemId" name="QuantityValues" asp-for="@itemlist.QuantityValue" style="width:100px;" />
                                                                        }
                                                                        <span class="text-bold-400" id="spanquantity_@itemlist.ItemId" hidden>@itemlist.QuantityValue</span>
                                                                    </td>
                                                                    <td>
                                                                        <span id="discount_@itemlist.ItemId">@itemlist.Discount</span>
                                                                    </td>
                                                                    <td>
                                                                        <span> @(SalesHelpers.Data)</span>
                                                                        <span class="text-bold-500 text-info" id="TotalPrice_@itemlist.ItemId">@itemlist.TotalPrice</span>
                                                                        <span hidden id="AddedDiscount_@itemlist.ItemId">@itemlist.AddedDiscount</span>
                                                                    </td>
                                                                    <td>
                                                                        <a href="#" data-Id="@itemlist.ItemId" class="text-danger font-medium-1 text-bold-600 removeSaleList">X</a>
                                                                        @*<input type="hidden" name="SalesIds" asp-for="@itemlist.SalesId" />*@
                                                                        @*<input type="hidden" name="CustomerIds" asp-for="@itemlist.CustomerId" />*@
                                                                        <input type="hidden" name="Categorys" asp-for="@itemlist.Category" />
                                                                        <input type="hidden" name="ItemIds" asp-for="@itemlist.ItemId" />
                                                                        <input type="hidden" name="Measurements" asp-for="@itemlist.Measurement" />
                                                                        <input type="hidden" id="PercePerItemId_@itemlist.ItemId" name="PricePerMeasList" asp-for="@itemlist.PricePerMeas" />
                                                                        <input type="hidden" id="TotalPriceList_@itemlist.ItemId" name="TotalPriceList" asp-for="@itemlist.TotalPrice" />
                                                                        <input type="hidden" id="DiscountListId_@itemlist.ItemId" name="DiscountList" asp-for="@itemlist.Discount" />
                                                                        <input type="hidden" id="ItemWeight_@itemlist.ItemId" name="ItemWeight" asp-for="@itemlist.ItemWeight" />

                                                                        @*   <input type="hidden" name="weightList" asp-for="@itemlist.weight" />*@
                                                                        @*<input type="hidden" name="DeliveryDateList" asp-for="@itemlist.DeliveryDate" />*@
                                                                        @* <input type="hidden" name="CreatedByList" value="@Model.SaleData.CreatedBy" />*@

                                                                    </td>
                                                                </tr>
                                                            }
                                                            @*<tr>
                                                <td>
                                                    <div class="m-widget4__img m-widget4__img--logo">
                                                        <img src="https://freshlo.oss-ap-south-1.aliyuncs.com/HurTex/icon/ITM0239.png" alt="" style="width:60px;">
                                                    </div>
                                                </td>
                                                <td><span hidden="" id="Totalitemstock_ITM0239">-12</span></td>
                                                <td>
                                                    <h6 class="mb-1">Jaggery Powder Traditional (Natural Sugar) 500g</h6>
                                                    <span class="display-block font-small-3 text-bold-500 text-muted">Masala, Spices & Chutney</span>
                                                </td>
                                                <td>
                                                    <span>1 pk X Rs. 56</span>
                                                </td>
                                                <td>
                                                    <span class="text-bold-400">1</span>
                                                </td>
                                                <td>
                                                    <span class="text-bold-400">1</span>
                                                </td>
                                                <td>
                                                    <span>0</span>
                                                </td>
                                                <td>
                                                    <span> Rs.</span>
                                                    <span class="text-bold-500 text-info">56</span>
                                                </td>
                                                <td>
                                                    <a href="#" class="text-danger font-medium-1 text-bold-600">X</a>
                                                </td>
                                            </tr>*@
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
        @*</form>*@
    </div>
</form>

<!-- Change Delivery Date -->
<div class="modal fade" id="changeDeliveryDate" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Change Delivery Date</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="mb-1">Current Delivery Date</label>
                            <h6 class="font-medium-3 text-bold-600">@(Model.SaleData.DeliveryDate.ToString("MM-dd-yyyy", CultureInfo.InvariantCulture))</h6>
                        </div>
                        <div class="form-group">
                            <label class="mb-1">Change Delivery Date</label>
                            <div class="input-group date">
                                <input type="text" id="m_datetimepicker_6" class="form-control m-input m-input--solid newDeliveryDate" placeholder="Delivery Date" />
                                <div class="input-group-append">
                                    <span class="input-group-text">
                                        <i class="la la-calendar-check-o"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-success" id="btnUpdateDeliveryDate">Submit</button>
            </div>
        </div>
    </div>
</div>

<!-- Change Delivery Charges -->
<div class="modal fade" id="updateDeliveryCharges" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Update Delivery Charges</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="mb-1">Current Delivery Charges</label>
                            <h6 class="font-medium-1 text-bold-500"> @(SalesHelpers.Data)  @Model.SaleData.DeliveryCharges</h6>
                        </div>
                        <div class="form-group">
                            <label class="mb-1">Change Delivery Charges</label>
                            <input type="number" class="form-control m-input m-input--solid" id="DeliveryCharge" min="0" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-success" id="btnChangeDeliveryCharge">Submit</button>
            </div>
        </div>
    </div>
</div>

<!-- Apply Coupon Code -->
<div class="modal fade" id="applyCouponCode" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Apply Coupon Code</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="mb-1">Apply Coupon Code</label>
                            @* <input type="text" class="form-control m-input m-input--solid" />*@
                            <select class="form-control text-bold-600" id="CoupenCodeId" asp-for="@Model.SaleData.ComputedCoupen" asp-items="Model.GetCoupenList" >
                                <option value="0" selected="selected">Select Coupen Code</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-success" id="btnCouponSubmit">Submit</button>
            </div>
        </div>
    </div>
</div>


<!-- Refund Initiated -->
<div class="modal fade" id="refundInitiateds" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Refund Initiated</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="mb-1">Refund Initiated Notes</label>
                            <textarea rows="3" class="form-control m-input m-input--solid"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-success">Submit</button>
            </div>
        </div>
    </div>
</div>

<!-- Assign DeleliveryPerson -->
<div class="modal fade" id="AssignDeliveryPerson" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Assign Delivery Of Product</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <d4iv class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="mb-1">Delivery Person</label>
                            <select class="form-control m-input--solid" id="DeliveryPersonId">
                                <option value="0" selected disabled>Select Name</option>
                            </select>
                        </div>
                        <span class="errormsg" id="DeliveryPersonErr" style="display:none">Field Cannot be Empty !</span>
                        <div class="form-group">
                            <label class="mb-1">Delivery Notes</label>
                            <textarea class="form-control m-input--solid" id="DeliveryNotes" name="DeliveryNotes"></textarea>
                        </div>
                    </div>
                </div>
            </d4iv>
            <div class="modal-footer">
                <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-success" id="BtnAssignDelivery">Submit</button>
            </div>
        </div>
    </div>
</div>

<!-- Change Payment Status -->
<div class="modal fade" id="changepaymentStatus" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Change Payment Status</h5>
                <button type="button" class="flaticon-close" data-dismiss="modal" aria-label="Close" value="X">
 
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="mb-1">Payment Status</label>
                            <select asp-for="@Model.SaleData.PaymentStatus" class="form-control m-input--solid" id="PaymentStatusId" name="PaymentStatus" required>
                                <option selected disabled hidden>Select Payment Status</option>
                                <option value="Pending">Pending</option>
                                <option value="Paid">Paid</option>
                                <option value="Partially">Partially</option>
                            </select>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="mb-1">Payment Mode</label>
                            <select asp-for="@Model.SaleData.PaymentMode" class="form-control m-input--solid" id="PaymentModeId" name="PaymentStatus" asp-items="@SalesHelpers.ModeList" required>
                                <option selected disabled>Select Payment Mode</option>
                                <option value="ONLINE" disabled>ONLINE</option>
                            </select>

                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-success" id="BtnPaymentStatus">Submit</button>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script src="~/assets/scripts/sales/detail.js"></script>
    <script src="~/assets/scripts/sales/OrderStatus.js"></script>
}



@*<div class="row">
                            <div class="col">
        <div class="form-group">
            <label>Order Status</label>
            <select class="form-control m-input--solid">
                <option selected disabled>Select Order Status</option>
                <option value="Ordered">Ordered</option>
                <option value="Packed">Packed</option>
                <option value="Delivered">Delivered</option>
                <option value="Cancelled">Cancelled</option>
                <option value="Confirmed">Confirmed</option>
                <option value="Dispatched">Dispatched</option>
                <option value="ReAttempt">ReAttempt</option>
                <option value="UnDelivered">UnDelivered</option>
                <option value="Refused">Refused</option>
                <option value="Redispatched #2">Redispatched #2</option>
                <option value="refunded">Refunded</option>
            </select>
        </div>
    </div>
                            <div class="col">
                                <div class="form-group">
                                    <label>Payment Status</label>
                                    <select class="form-control m-input--solid">
                                        <option selected disabled>Select Payment Status</option>
                                        <option value="Pending">Pending</option>
                                        <option value="Paid">Paid</option>
                                        <option value="failed">Failed</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <label>Payment Mode</label>
                                    <select class="form-control m-input--solid">
                                        <option selected disabled>Select Payment Mode</option>
                                        <option value="CCP">CCP</option>
                                        <option value="Paytm">Paytm</option>
                                        <option value="MobiKwik">MobiKwik</option>
                                        <option value="PayZ">PayZ</option>
                                        <option value="YesPay">YesPay</option>
                                        <option value="COD">COD</option>
                                        <option value="CrOD">CrOD</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <label>Delivery Date</label>
                                    <div class="input-group date">
                                        <input type="text" id="m_datetimepicker_6" class="form-control m-input m-input--solid" placeholder="Delivery Date" />
                                        <div class="input-group-append">
                                            <span class="input-group-text">
                                                <i class="la la-calendar-check-o"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <label>Delivery Slot</label>
                                    <select class="form-control m-input--solid">
                                        <option selected disabled>Select Slot</option>
                                        <option>11 AM - 2 PM</option>
                                        <option>4 PM - 8 PM</option>
                                        <option>8 PM - 11 PM</option>
                                    </select>
                                </div>
                            </div>
                        </div>*@
